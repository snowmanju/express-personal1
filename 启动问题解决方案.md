# ğŸš¨ æœåŠ¡å™¨å¯åŠ¨é—®é¢˜ - å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

## ä½ é‡åˆ°çš„é—®é¢˜
è¿è¡Œ `python run.py` åæŠ¥é”™ï¼Œç™»å½•ç½‘å€ä¸æ˜¾ç¤ºå†…å®¹

---

## âš¡ å¿«é€Ÿè§£å†³ï¼ˆ3æ­¥ï¼‰

### ç¬¬1æ­¥ï¼šè¿è¡Œè‡ªåŠ¨ä¿®å¤
```bash
fix_common_issues.bat
```
è¿™ä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶ä¿®å¤ï¼š
- è™šæ‹Ÿç¯å¢ƒ
- ä¾èµ–åŒ…
- MySQLæœåŠ¡
- æ•°æ®åº“
- ç«¯å£å ç”¨

### ç¬¬2æ­¥ï¼šæµ‹è¯•å¯åŠ¨
```bash
test_startup.bat
```
è¿™ä¼šå°è¯•å¯åŠ¨æœåŠ¡å™¨å¹¶æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

### ç¬¬3æ­¥ï¼šæ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤
å¦‚æœè¿˜æœ‰é”™è¯¯ï¼ŒæŸ¥çœ‹ä¸‹é¢çš„å¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆ

---

## ğŸ”¥ æœ€å¸¸è§çš„5ä¸ªé”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### é”™è¯¯1: MySQLè¿æ¥å¤±è´¥ â­â­â­â­â­
**é”™è¯¯ä¿¡æ¯ï¼š**
```
Can't connect to MySQL server on 'localhost'
æˆ–
ç”±äºç›®æ ‡è®¡ç®—æœºç§¯ææ‹’ç»ï¼Œæ— æ³•è¿æ¥
```

**åŸå› ï¼š** MySQLæœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å¯åŠ¨MySQLæœåŠ¡
net start MySQL

# å¦‚æœæç¤ºæœåŠ¡åæ— æ•ˆï¼Œåœ¨æœåŠ¡ç®¡ç†å™¨ä¸­æŸ¥æ‰¾MySQLæœåŠ¡å
# Win+R è¾“å…¥ services.mscï¼Œæ‰¾åˆ°MySQLæœåŠ¡å¹¶å¯åŠ¨
```

---

### é”™è¯¯2: æ•°æ®åº“ä¸å­˜åœ¨ â­â­â­â­
**é”™è¯¯ä¿¡æ¯ï¼š**
```
Unknown database 'express_tracking'
æˆ–
(1049, "Unknown database 'express_tracking'")
```

**åŸå› ï¼š** æ•°æ®åº“è¿˜æ²¡æœ‰åˆ›å»º

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. ç™»å½•MySQL
mysql -u root -p

# 2. åˆ›å»ºæ•°æ®åº“
CREATE DATABASE express_tracking CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# 3. é€€å‡º
exit;

# 4. è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head
```

---

### é”™è¯¯3: å¯†ç é”™è¯¯ â­â­â­
**é”™è¯¯ä¿¡æ¯ï¼š**
```
Access denied for user 'root'@'localhost'
æˆ–
(1045, "Access denied...")
```

**åŸå› ï¼š** .envæ–‡ä»¶ä¸­çš„å¯†ç ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ‰“å¼€ `.env` æ–‡ä»¶
2. æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
   ```
   DATABASE_URL=mysql+pymysql://root:password@localhost:3306/express_tracking
   ```
3. å°† `password` æ”¹ä¸ºä½ çš„å®é™…MySQLå¯†ç 
4. ä¿å­˜æ–‡ä»¶

---

### é”™è¯¯4: ç«¯å£è¢«å ç”¨ â­â­
**é”™è¯¯ä¿¡æ¯ï¼š**
```
OSError: [WinError 10048] é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€åªå…è®¸ä½¿ç”¨ä¸€æ¬¡
æˆ–
Address already in use
```

**åŸå› ï¼š** 8000ç«¯å£å·²è¢«å…¶ä»–ç¨‹åºå ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8000

# 2. è®°ä¸‹æœ€åä¸€åˆ—çš„PIDï¼ˆè¿›ç¨‹IDï¼‰

# 3. ç»“æŸè¯¥è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F

# æˆ–è€…ä¿®æ”¹ç«¯å£å·
# ç¼–è¾‘ run.pyï¼Œå°† port=8000 æ”¹ä¸º port=8001
```

---

### é”™è¯¯5: ç¼ºå°‘ä¾èµ–åŒ… â­â­
**é”™è¯¯ä¿¡æ¯ï¼š**
```
ModuleNotFoundError: No module named 'fastapi'
æˆ–
ImportError: cannot import name...
```

**åŸå› ï¼š** ä¾èµ–åŒ…æœªå®‰è£…æˆ–è™šæ‹Ÿç¯å¢ƒæœªæ¿€æ´»

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
.\venv\Scripts\activate

# 2. é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. å¦‚æœè¿˜æœ‰é—®é¢˜
python -m pip install --upgrade pip
pip install -r requirements.txt --force-reinstall
```

---

## ğŸ” å¦‚ä½•æŸ¥çœ‹å…·ä½“é”™è¯¯

### æ–¹æ³•1: ä½¿ç”¨æµ‹è¯•è„šæœ¬
```bash
test_startup.bat
```
ä¼šæ˜¾ç¤ºå®Œæ•´çš„é”™è¯¯ä¿¡æ¯

### æ–¹æ³•2: æ‰‹åŠ¨è¿è¡Œ
```bash
cd E:\kiro
.\venv\Scripts\activate
python run.py
```
å¤åˆ¶æ‰€æœ‰çº¢è‰²çš„é”™è¯¯ä¿¡æ¯

---

## ğŸ“‹ å®Œæ•´æ£€æŸ¥æ¸…å•

å¦‚æœä¸Šé¢çš„æ–¹æ³•éƒ½ä¸è¡Œï¼ŒæŒ‰é¡ºåºæ£€æŸ¥ï¼š

### âœ… æ£€æŸ¥1: Pythonç¯å¢ƒ
```bash
python --version
# åº”è¯¥æ˜¾ç¤º Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
```

### âœ… æ£€æŸ¥2: è™šæ‹Ÿç¯å¢ƒ
```bash
# å‘½ä»¤è¡Œå‰é¢åº”è¯¥æœ‰ (venv)
# å¦‚æœæ²¡æœ‰ï¼Œè¿è¡Œï¼š
.\venv\Scripts\activate
```

### âœ… æ£€æŸ¥3: MySQLæœåŠ¡
```bash
# æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
net start | findstr MySQL

# å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œå¯åŠ¨æœåŠ¡
net start MySQL
```

### âœ… æ£€æŸ¥4: æ•°æ®åº“å­˜åœ¨
```bash
mysql -u root -p
# è¾“å…¥å¯†ç åï¼š
SHOW DATABASES;
# åº”è¯¥èƒ½çœ‹åˆ° express_tracking
```

### âœ… æ£€æŸ¥5: .envé…ç½®
```bash
type .env
# æ£€æŸ¥ DATABASE_URL å’Œ SECRET_KEY æ˜¯å¦é…ç½®
```

### âœ… æ£€æŸ¥6: ç«¯å£å¯ç”¨
```bash
netstat -ano | findstr :8000
# å¦‚æœæœ‰è¾“å‡ºï¼Œè¯´æ˜ç«¯å£è¢«å ç”¨
```

---

## ğŸ¯ åˆ†æ­¥æµ‹è¯•

### æµ‹è¯•1: æµ‹è¯•æ•°æ®åº“è¿æ¥
```bash
python -c "from dotenv import load_dotenv; load_dotenv(); import pymysql; conn = pymysql.connect(host='localhost', user='root', password='ä½ çš„å¯†ç ', database='express_tracking'); print('æ•°æ®åº“è¿æ¥æˆåŠŸ'); conn.close()"
```

### æµ‹è¯•2: æµ‹è¯•åº”ç”¨å¯¼å…¥
```bash
python -c "from app.main import app; print('åº”ç”¨å¯¼å…¥æˆåŠŸ')"
```

### æµ‹è¯•3: ä½¿ç”¨å¤‡ç”¨å¯åŠ¨æ–¹å¼
```bash
# å¦‚æœ run.py ä¸è¡Œï¼Œç›´æ¥ç”¨ uvicorn
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

---

## ğŸŒ æµè§ˆå™¨è®¿é—®é—®é¢˜

å¦‚æœæœåŠ¡å™¨å¯åŠ¨æˆåŠŸä½†ç½‘é¡µä¸æ˜¾ç¤ºï¼š

### é—®é¢˜1: ç½‘é¡µç©ºç™½
**å°è¯•ï¼š**
- http://localhost:8000
- http://127.0.0.1:8000
- http://localhost:8000/admin/login.html

### é—®é¢˜2: æ— æ³•è¿æ¥
**æ£€æŸ¥ï¼š**
1. æœåŠ¡å™¨æ˜¯å¦çœŸçš„åœ¨è¿è¡Œï¼ˆå‘½ä»¤è¡Œåº”è¯¥æ˜¾ç¤º "Uvicorn running on..."ï¼‰
2. é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†è¿æ¥
3. æµè§ˆå™¨æ˜¯å¦æœ‰ç¼“å­˜é—®é¢˜ï¼ˆCtrl+Shift+Delete æ¸…é™¤ç¼“å­˜ï¼‰

### é—®é¢˜3: 404é”™è¯¯
**æ£€æŸ¥ï¼š**
1. URLæ˜¯å¦æ­£ç¡®
2. staticæ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
3. æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

---

## ğŸ’Š ç»ˆæè§£å†³æ–¹æ¡ˆ

å¦‚æœä»¥ä¸Šæ‰€æœ‰æ–¹æ³•éƒ½ä¸è¡Œï¼š

### æ–¹æ¡ˆ1: å®Œå…¨é‡ç½®
```bash
# 1. åœæ­¢æ‰€æœ‰Pythonè¿›ç¨‹
taskkill /F /IM python.exe

# 2. åˆ é™¤è™šæ‹Ÿç¯å¢ƒ
rmdir /s /q venv

# 3. é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# 4. æ¿€æ´»å¹¶å®‰è£…ä¾èµ–
.\venv\Scripts\activate
pip install -r requirements.txt

# 5. é‡æ–°å¯åŠ¨
python run.py
```

### æ–¹æ¡ˆ2: ä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬
```bash
# ä½¿ç”¨ç®€åŒ–çš„å¯åŠ¨è„šæœ¬
python app_sf_style_backend_simple.py
```

### æ–¹æ¡ˆ3: æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒ
```bash
# æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–Pythonè¿›ç¨‹å ç”¨èµ„æº
tasklist | findstr python

# æ£€æŸ¥æ˜¯å¦æœ‰é˜²ç«å¢™é˜»æ­¢
# ä¸´æ—¶å…³é—­Windowsé˜²ç«å¢™æµ‹è¯•
```

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **è¿è¡Œ `test_startup.bat` çš„å®Œæ•´è¾“å‡º**
2. **Pythonç‰ˆæœ¬** (`python --version`)
3. **MySQLçŠ¶æ€** (`net start | findstr MySQL`)
4. **èƒ½å¦è¿æ¥MySQL** (`mysql -u root -p`)
5. **.envæ–‡ä»¶å†…å®¹**ï¼ˆéšè—å¯†ç éƒ¨åˆ†ï¼‰

---

## ğŸ‰ æˆåŠŸå¯åŠ¨çš„æ ‡å¿—

å½“æœåŠ¡å™¨æˆåŠŸå¯åŠ¨æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

```
INFO:     Will watch for changes in these directories: ['E:\\kiro']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [xxxxx] using WatchFiles
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

ç„¶åè®¿é—® http://localhost:8000/admin/login.html åº”è¯¥èƒ½çœ‹åˆ°ç™»å½•é¡µé¢ï¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†æ•…éšœæ’æŸ¥**: `æœåŠ¡å™¨å¯åŠ¨æ•…éšœæ’æŸ¥.md`
- **å¹³å°æµ‹è¯•æŒ‡å—**: `å¹³å°æµ‹è¯•æŒ‡å—.md`
- **è‡ªåŠ¨ä¿®å¤è„šæœ¬**: `fix_common_issues.bat`
- **æµ‹è¯•å¯åŠ¨è„šæœ¬**: `test_startup.bat`
