# æœåŠ¡å™¨å¯åŠ¨æ•…éšœæ’æŸ¥æŒ‡å—

## é—®é¢˜ï¼šè¿è¡Œ `python run.py` åæŠ¥é”™ï¼Œç™»å½•ç½‘å€ä¸æ˜¾ç¤ºå†…å®¹

---

## ğŸ” ç¬¬ä¸€æ­¥ï¼šæŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯

**è¯·åœ¨å‘½ä»¤è¡Œè¿è¡Œå¹¶å¤åˆ¶å®Œæ•´çš„é”™è¯¯ä¿¡æ¯ï¼š**

```bash
cd E:\kiro
.\venv\Scripts\activate
python run.py
```

**å¸¸è§é”™è¯¯ç±»å‹ï¼š**

### é”™è¯¯1: æ•°æ®åº“è¿æ¥å¤±è´¥
```
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server...")
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ
net start MySQL

# 2. å¦‚æœæœåŠ¡ä¸å­˜åœ¨ï¼Œå¯åŠ¨MySQL
# åœ¨æœåŠ¡ç®¡ç†å™¨ä¸­å¯åŠ¨MySQLæœåŠ¡

# 3. æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -u root -p
# è¾“å…¥å¯†ç åï¼Œå¦‚æœèƒ½è¿›å…¥MySQLå‘½ä»¤è¡Œï¼Œè¯´æ˜æœåŠ¡æ­£å¸¸
```

---

### é”™è¯¯2: æ•°æ®åº“ä¸å­˜åœ¨
```
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1049, "Unknown database 'express_tracking'")
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. ç™»å½•MySQL
mysql -u root -p

# 2. åˆ›å»ºæ•°æ®åº“
CREATE DATABASE express_tracking CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# 3. é€€å‡ºMySQL
exit;

# 4. è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head
```

---

### é”™è¯¯3: å¯†ç é”™è¯¯
```
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1045, "Access denied for user 'root'@'localhost'")
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ä¿®æ”¹ .env æ–‡ä»¶ä¸­çš„å¯†ç 
# æ‰“å¼€ .env æ–‡ä»¶ï¼Œä¿®æ”¹è¿™ä¸€è¡Œï¼š
DATABASE_URL=mysql+pymysql://root:ä½ çš„å®é™…å¯†ç @localhost:3306/express_tracking
```

---

### é”™è¯¯4: ç«¯å£è¢«å ç”¨
```
OSError: [WinError 10048] é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :8000

# 2. ç»“æŸå ç”¨è¿›ç¨‹ï¼ˆè®°ä¸‹PIDï¼‰
taskkill /PID <è¿›ç¨‹ID> /F

# æˆ–è€…ä¿®æ”¹ç«¯å£å·
# ç¼–è¾‘ run.pyï¼Œå°† port=8000 æ”¹ä¸º port=8001
```

---

### é”™è¯¯5: ç¼ºå°‘ä¾èµ–åŒ…
```
ModuleNotFoundError: No module named 'fastapi'
æˆ–
ImportError: cannot import name 'xxx'
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
.\venv\Scripts\activate

# é‡æ–°å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå°è¯•å‡çº§pip
python -m pip install --upgrade pip
pip install -r requirements.txt --force-reinstall
```

---

### é”™è¯¯6: å¯¼å…¥é”™è¯¯
```
ImportError: cannot import name 'xxx' from 'app.xxx'
æˆ–
AttributeError: module 'app.xxx' has no attribute 'xxx'
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
dir app\main.py
dir app\core\database.py

# å¦‚æœæ–‡ä»¶ç¼ºå¤±ï¼Œå¯èƒ½éœ€è¦é‡æ–°å…‹éš†é¡¹ç›®
```

---

## ğŸ” ç¬¬äºŒæ­¥ï¼šæ‰‹åŠ¨æ£€æŸ¥æ¸…å•

### æ£€æŸ¥1: Pythonç¯å¢ƒ
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆéœ€è¦3.8+ï¼‰
python --version

# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ¿€æ´»ï¼ˆå‘½ä»¤è¡Œå‰é¢åº”è¯¥æœ‰(venv)ï¼‰
# å¦‚æœæ²¡æœ‰ï¼Œè¿è¡Œï¼š
.\venv\Scripts\activate
```

### æ£€æŸ¥2: ä¾èµ–åŒ…
```bash
# æ£€æŸ¥å…³é”®åŒ…æ˜¯å¦å®‰è£…
pip show fastapi
pip show uvicorn
pip show sqlalchemy
pip show pymysql
pip show pandas

# å¦‚æœä»»ä½•åŒ…æ˜¾ç¤º "WARNING: Package(s) not found"ï¼Œè¿è¡Œï¼š
pip install <åŒ…å>
```

### æ£€æŸ¥3: é…ç½®æ–‡ä»¶
```bash
# æ£€æŸ¥.envæ–‡ä»¶æ˜¯å¦å­˜åœ¨
dir .env

# æŸ¥çœ‹.envå†…å®¹
type .env

# ç¡®ä¿åŒ…å«ä»¥ä¸‹é…ç½®ï¼š
# DATABASE_URL=mysql+pymysql://root:password@localhost:3306/express_tracking
# SECRET_KEY=your-secret-key-change-in-production
```

### æ£€æŸ¥4: MySQLæœåŠ¡
```bash
# æ–¹æ³•1: å‘½ä»¤è¡Œæ£€æŸ¥
net start | findstr MySQL

# æ–¹æ³•2: æœåŠ¡ç®¡ç†å™¨
# Win+R è¾“å…¥ services.msc
# æŸ¥æ‰¾ MySQL æœåŠ¡ï¼Œç¡®ä¿çŠ¶æ€ä¸º"æ­£åœ¨è¿è¡Œ"

# æ–¹æ³•3: æµ‹è¯•è¿æ¥
mysql -u root -p
# è¾“å…¥å¯†ç ï¼Œå¦‚æœèƒ½è¿›å…¥è¯´æ˜æœåŠ¡æ­£å¸¸
```

### æ£€æŸ¥5: æ•°æ®åº“å’Œè¡¨
```sql
-- ç™»å½•MySQL
mysql -u root -p

-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“
SHOW DATABASES;

-- å¦‚æœæ²¡æœ‰express_trackingï¼Œåˆ›å»ºå®ƒ
CREATE DATABASE express_tracking CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ä½¿ç”¨æ•°æ®åº“
USE express_tracking;

-- æŸ¥çœ‹è¡¨
SHOW TABLES;

-- å¦‚æœæ²¡æœ‰è¡¨ï¼Œé€€å‡ºMySQLåè¿è¡Œè¿ç§»
exit;
```

```bash
# è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head
```

### æ£€æŸ¥6: ç«¯å£å ç”¨
```bash
# æ£€æŸ¥8000ç«¯å£æ˜¯å¦è¢«å ç”¨
netstat -ano | findstr :8000

# å¦‚æœæœ‰è¾“å‡ºï¼Œè¯´æ˜ç«¯å£è¢«å ç”¨
# è®°ä¸‹æœ€åä¸€åˆ—çš„PIDï¼Œç„¶åï¼š
taskkill /PID <PIDå·> /F
```

### æ£€æŸ¥7: æ–‡ä»¶ç»“æ„
```bash
# æ£€æŸ¥å…³é”®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
dir run.py
dir app\main.py
dir app\core\database.py
dir static\index.html
dir static\admin\login.html
```

---

## ğŸ” ç¬¬ä¸‰æ­¥ï¼šåˆ†æ­¥æµ‹è¯•

### æµ‹è¯•1: æµ‹è¯•Pythonå¯¼å…¥
```bash
python -c "import fastapi; print('FastAPI OK')"
python -c "import uvicorn; print('Uvicorn OK')"
python -c "import sqlalchemy; print('SQLAlchemy OK')"
python -c "import pymysql; print('PyMySQL OK')"
```

### æµ‹è¯•2: æµ‹è¯•æ•°æ®åº“è¿æ¥
```bash
python -c "from dotenv import load_dotenv; load_dotenv(); from app.core.database import engine; engine.connect(); print('Database OK')"
```

### æµ‹è¯•3: æµ‹è¯•åº”ç”¨å¯¼å…¥
```bash
python -c "from app.main import app; print('App OK')"
```

### æµ‹è¯•4: å¯åŠ¨æœåŠ¡å™¨ï¼ˆè¯¦ç»†æ—¥å¿—ï¼‰
```bash
# ä½¿ç”¨è¯¦ç»†æ—¥å¿—æ¨¡å¼å¯åŠ¨
python -c "import uvicorn; uvicorn.run('app.main:app', host='0.0.0.0', port=8000, log_level='debug')"
```

---

## ğŸ” ç¬¬å››æ­¥ï¼šä½¿ç”¨å¤‡ç”¨å¯åŠ¨æ–¹å¼

å¦‚æœ `run.py` ä¸€ç›´å¤±è´¥ï¼Œå°è¯•ç›´æ¥ä½¿ç”¨uvicornï¼š

```bash
# æ–¹æ³•1: ç›´æ¥ä½¿ç”¨uvicornå‘½ä»¤
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# æ–¹æ³•2: ä½¿ç”¨Pythonæ¨¡å—æ–¹å¼
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# æ–¹æ³•3: ä½¿ç”¨ä¸åŒç«¯å£
python -m uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload
```

---

## ğŸ” ç¬¬äº”æ­¥ï¼šæ£€æŸ¥æµè§ˆå™¨è®¿é—®

### å¦‚æœæœåŠ¡å™¨å¯åŠ¨æˆåŠŸä½†ç½‘é¡µä¸æ˜¾ç¤ºï¼š

**1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦çœŸçš„åœ¨è¿è¡Œ**
```bash
# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# INFO:     Uvicorn running on http://0.0.0.0:8000
# INFO:     Application startup complete.
```

**2. å°è¯•ä¸åŒçš„URL**
```
http://localhost:8000
http://127.0.0.1:8000
http://0.0.0.0:8000
```

**3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**
- æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
- æŸ¥çœ‹ Console æ ‡ç­¾é¡µæ˜¯å¦æœ‰é”™è¯¯
- æŸ¥çœ‹ Network æ ‡ç­¾é¡µï¼Œçœ‹è¯·æ±‚æ˜¯å¦æˆåŠŸ

**4. æ£€æŸ¥é˜²ç«å¢™**
- Windowsé˜²ç«å¢™å¯èƒ½é˜»æ­¢äº†è¿æ¥
- ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯•

**5. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
- Ctrl + Shift + Delete
- æ¸…é™¤ç¼“å­˜å’ŒCookie

---

## ğŸ“ æ”¶é›†é”™è¯¯ä¿¡æ¯

å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ— æ³•è§£å†³ï¼Œè¯·æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š

```bash
# 1. Pythonç‰ˆæœ¬
python --version

# 2. å·²å®‰è£…çš„åŒ…
pip list > installed_packages.txt

# 3. ç¯å¢ƒå˜é‡
echo %PATH%

# 4. å®Œæ•´é”™è¯¯ä¿¡æ¯
python run.py > error_log.txt 2>&1

# 5. æ•°æ®åº“çŠ¶æ€
mysql -u root -p -e "SHOW DATABASES;" > db_status.txt
```

---

## ğŸš€ å¿«é€Ÿä¿®å¤è„šæœ¬

åˆ›å»ºä¸€ä¸ª `fix_common_issues.bat` æ–‡ä»¶ï¼š

```batch
@echo off
echo ä¿®å¤å¸¸è§é—®é¢˜...

echo [1/5] æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ...
call venv\Scripts\activate

echo [2/5] æ›´æ–°pip...
python -m pip install --upgrade pip

echo [3/5] é‡æ–°å®‰è£…ä¾èµ–...
pip install -r requirements.txt

echo [4/5] æ£€æŸ¥MySQLæœåŠ¡...
net start MySQL

echo [5/5] åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰...
mysql -u root -p -e "CREATE DATABASE IF NOT EXISTS express_tracking CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

echo å®Œæˆï¼ç°åœ¨å°è¯•è¿è¡Œ: python run.py
pause
```

---

## ğŸ’¡ æœ€å¸¸è§çš„3ä¸ªé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: MySQLæœåŠ¡æœªå¯åŠ¨ (80%çš„æƒ…å†µ)
```bash
net start MySQL
```

### é—®é¢˜2: æ•°æ®åº“ä¸å­˜åœ¨ (15%çš„æƒ…å†µ)
```sql
mysql -u root -p
CREATE DATABASE express_tracking;
exit;
alembic upgrade head
```

### é—®é¢˜3: ç«¯å£è¢«å ç”¨ (5%çš„æƒ…å†µ)
```bash
# æŸ¥çœ‹å ç”¨
netstat -ano | findstr :8000
# ç»“æŸè¿›ç¨‹
taskkill /PID <PID> /F
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½ä¸èƒ½è§£å†³é—®é¢˜ï¼Œè¯·æä¾›ï¼š

1. **å®Œæ•´çš„é”™è¯¯ä¿¡æ¯**ï¼ˆå¤åˆ¶å‘½ä»¤è¡Œçš„æ‰€æœ‰è¾“å‡ºï¼‰
2. **Pythonç‰ˆæœ¬**ï¼ˆ`python --version`ï¼‰
3. **MySQLçŠ¶æ€**ï¼ˆ`net start | findstr MySQL`ï¼‰
4. **.envæ–‡ä»¶å†…å®¹**ï¼ˆéšè—å¯†ç ï¼‰
5. **æ˜¯å¦èƒ½è¿æ¥MySQL**ï¼ˆ`mysql -u root -p`ï¼‰

è¿™æ ·æˆ‘å¯ä»¥æ›´å‡†ç¡®åœ°å¸®ä½ è¯Šæ–­é—®é¢˜ï¼
