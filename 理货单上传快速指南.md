# 理货单上传快速指南

## 📥 下载模板

**模板文件**：`static/templates/理货单上传模板.csv`

**在线下载**：http://localhost:8000/static/templates/理货单上传模板.csv

## ✅ 模板已验证

模板已通过测试：
- ✅ 上传成功
- ✅ 3行数据全部有效
- ✅ 数据格式正确

## 📋 列名（必须完全匹配）

```
理货日期,快递单号,集包单号,长度,宽度,高度,重量,货物代码,客户代码,运输代码
```

⚠️ **重要**：列名必须是中文，顺序和拼写必须完全一致！

## 📝 示例数据

```csv
理货日期,快递单号,集包单号,长度,宽度,高度,重量,货物代码,客户代码,运输代码
2024-01-26,YT1234567890,PKG001,20.5,15.0,10.0,1.5,GOODS001,CUST001,TRANS001
2024-01-26,ZT9876543210,PKG002,25.0,20.0,15.0,2.0,GOODS002,CUST002,TRANS002
```

## 🔧 字段说明

| 字段 | 必填 | 格式 | 示例 |
|------|------|------|------|
| 理货日期 | ✅ | YYYY-MM-DD | 2024-01-26 |
| 快递单号 | ✅ | 文本（唯一） | YT1234567890 |
| 集包单号 | ❌ | 文本 | PKG001 |
| 长度 | ❌ | 数字（cm） | 20.5 |
| 宽度 | ❌ | 数字（cm） | 15.0 |
| 高度 | ❌ | 数字（cm） | 10.0 |
| 重量 | ❌ | 数字（kg） | 1.5 |
| 货物代码 | ✅ | 文本 | GOODS001 |
| 客户代码 | ✅ | 文本 | CUST001 |
| 运输代码 | ✅ | 文本 | TRANS001 |

## 📤 上传步骤

1. **下载模板**
   - 点击下载链接或访问URL

2. **填写数据**
   - 打开CSV文件
   - 删除示例数据
   - 填写你的数据
   - **不要修改第一行（列名）**

3. **保存文件**
   - 保存为CSV格式
   - 编码：UTF-8

4. **上传**
   - 登录管理后台
   - 进入"文件上传"页面
   - 选择文件
   - 建议先勾选"仅预览"测试
   - 点击"上传文件"

## ⚠️ 常见错误解决

### 错误：未知错误

**可能原因**：
1. 列名不匹配
2. 文件编码不是UTF-8
3. 必填字段为空

**解决方案**：
1. 检查第一行列名是否完全匹配
2. 用记事本打开，另存为UTF-8编码
3. 检查必填字段：理货日期、快递单号、货物代码、客户代码、运输代码

### 错误：快递单号重复

**解决方案**：
- 确保每个快递单号唯一
- 删除重复的行

### 错误：日期格式错误

**解决方案**：
- 使用格式：YYYY-MM-DD
- 示例：2024-01-26

## 💡 最佳实践

1. **使用预览模式**
   - 首次上传勾选"仅预览"
   - 确认数据正确后再保存

2. **小批量测试**
   - 先上传2-3条数据测试
   - 成功后再上传完整数据

3. **保留备份**
   - 上传前保存原始文件
   - 便于出错时重新上传

4. **分批上传**
   - 大量数据（>1000行）分批上传
   - 每批500-1000行

## 🧪 测试工具

运行测试脚本验证模板：
```bash
python test_template_upload.py
```

## 📞 需要帮助？

如果遇到问题，请提供：
1. 你的CSV文件（前几行）
2. 浏览器控制台错误信息（F12）
3. 具体的错误提示

---

**快速检查清单**：
- [ ] 使用官方模板
- [ ] 列名完全匹配（中文）
- [ ] 快递单号唯一
- [ ] 必填字段已填写
- [ ] 日期格式：YYYY-MM-DD
- [ ] 文件编码：UTF-8
- [ ] 已使用预览模式测试
